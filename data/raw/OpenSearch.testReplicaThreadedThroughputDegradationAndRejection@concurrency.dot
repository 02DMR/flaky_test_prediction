digraph PDG {
label = "testReplicaThreadedThroughputDegradationAndRejection <3...23>";
0.0 [style = filled, label = "Settings settings = Settings.builder().put(IndexingPressure.MAX_INDEXING_BYTES.getKey(),\"10KB\").put(ShardIndexingPressureSettings.SHARD_INDEXING_PRESSURE_ENABLED.getKey(),true).put(ShardIndexingPressureSettings.SHARD_INDEXING_PRESSURE_ENFORCED.getKey(),true).put(ShardIndexingPressureMemoryManager.THROUGHPUT_DEGRADATION_LIMITS.getKey(),1).put(ShardIndexingPressureSettings.REQUEST_SIZE_WINDOW.getKey(),100).build(); <4...9>", fillcolor = white, shape = ellipse];
0.2 [style = filled, label = "ShardIndexingPressure shardIndexingPressure = new ShardIndexingPressure(settings,clusterService); <11>", fillcolor = white, shape = ellipse];
0.9 [style = filled, label = "assertEquals(15,shardIndexingPressure.coldStats().getIndexingPressureShardStats(shardId1).getCurrentReplicaLimits()); <21>", fillcolor = deeppink, shape = ellipse];
0.1 [style = filled, label = "final int NUM_THREADS = scaledRandomIntBetween(100,120); <10>", fillcolor = white, shape = ellipse];
0.4 [style = filled, label = "ShardId shardId1 = new ShardId(index,0); <13>", fillcolor = white, shape = ellipse];
0.10 [style = filled, label = "Enter <3...23>", fillcolor = aquamarine, shape = diamond];
0.5 [style = filled, label = "fireConcurrentAndParallelRequestsForUniformThroughPut(NUM_THREADS,shardIndexingPressure,shardId1,100,100,OperationType.REPLICA); <14...15>", fillcolor = white, shape = ellipse];
0.7 [style = filled, label = "expectThrows(,null); <18...19>", fillcolor = white, shape = ellipse];
0.8 [style = filled, label = "assertEquals(0,shardIndexingPressure.coldStats().getIndexingPressureShardStats(shardId1).getCurrentReplicaBytes()); <20>", fillcolor = white, shape = ellipse];
0.3 [style = filled, label = "Index index = new Index(\"IndexName\",\"UUID\"); <12>", fillcolor = white, shape = ellipse];
0.6 [style = filled, label = "fireAllThenCompleteConcurrentRequestsWithUniformDelay(ShardIndexingPressureSettings.REQUEST_SIZE_WINDOW.get(settings),shardIndexingPressure,shardId1,100,200,OperationType.REPLICA); <16...17>", fillcolor = white, shape = ellipse];
0.0 -> 0.1 [style = bold, label=""];
0.0 -> 0.2 [style = solid, label="settings"];
0.0 -> 0.6 [style = solid, label="settings"];
0.1 -> 0.2 [style = bold, label=""];
0.1 -> 0.5 [style = solid, label="NUM_THREADS"];
0.2 -> 0.3 [style = bold, label=""];
0.2 -> 0.5 [style = solid, label="shardIndexingPressure"];
0.2 -> 0.6 [style = solid, label="shardIndexingPressure"];
0.2 -> 0.8 [style = solid, label="shardIndexingPressure"];
0.2 -> 0.9 [style = solid, label="shardIndexingPressure"];
0.3 -> 0.4 [style = solid, label="index"];
0.3 -> 0.4 [style = bold, label=""];
0.4 -> 0.5 [style = solid, label="shardId1"];
0.4 -> 0.5 [style = bold, label=""];
0.4 -> 0.6 [style = solid, label="shardId1"];
0.4 -> 0.8 [style = solid, label="shardId1"];
0.4 -> 0.9 [style = solid, label="shardId1"];
0.5 -> 0.6 [style = bold, label=""];
0.6 -> 0.7 [style = bold, label=""];
0.7 -> 0.8 [style = bold, label=""];
0.8 -> 0.9 [style = bold, label=""];
0.10 -> 0.0 [style = dotted, label="true"];
0.10 -> 0.0 [style = bold, label=""];
0.10 -> 0.1 [style = dotted, label="true"];
0.10 -> 0.2 [style = dotted, label="true"];
0.10 -> 0.3 [style = dotted, label="true"];
0.10 -> 0.4 [style = dotted, label="true"];
0.10 -> 0.5 [style = dotted, label="true"];
0.10 -> 0.6 [style = dotted, label="true"];
0.10 -> 0.7 [style = dotted, label="true"];
0.10 -> 0.8 [style = dotted, label="true"];
0.10 -> 0.9 [style = dotted, label="true"];
}
